---
title: "Data aggregation of stream gauge data"
author: "KAL"
date: '2020-09-26'
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:
``` {r packages}
library(ggplot2)
library(lubridate)
library(tidyverse)

```


```{r File path 1}

# File path setup:
if (dir.exists('/Users/kellyloria/Documents/UNR_2020/Fall2020Projects/miniDOT_2020PrelimDat')){
  inputDir<- '/Users/kellyloria/Documents/UNR_2020/Fall2020Projects/miniDOT_2020PrelimDat'
  outputDir<- '/Users/kellyloria/Documents/UNR_2020/Fall2020Projects/miniDOT_2020PrelimDat/Clean_PrelimDat' 
}

```

## Blackwood Creek

You can also embed plots, for example:

```{r Blackwood , echo=FALSE}
# Blackwood:
Blackwood_prelim <-read.delim(paste0(inputDir,"/Blackwood_7450-617000/Cat_copy.TXT"), header=T, sep = ',')
summary(Blackwood_prelim)
Blackwood_prelim$Site <- "Blackwood"
Blackwood_prelim$Seiral <- "617000"

# attempting to convert dt1$timestamp dateTime string to R date structure (date or POSIXct)                                
tmpDateFormat<-"%Y-%m-%d %H:%M:%S" 
tmp1timestamp<-as.POSIXct(Blackwood_prelim$Pacific.Standard.Time,format=tmpDateFormat)
# Keep the new dates only if they all converted correctly
if(length(tmp1timestamp) == length(tmp1timestamp[!is.na(tmp1timestamp)])){Blackwood_prelim$timestamp <- tmp1timestamp } else {print("Date conversion failed for dt1$timestamp. Please inspect the data and do the date conversion yourself.")}    

Blackwood_prelimQ <- subset(Blackwood_prelim,timestamp >= as.POSIXct('2020-09-27 15:00:00') & 
                      timestamp <= as.POSIXct('2020-10-11 10:30:00'))

qplot(timestamp, Dissolved.Oxygen.Saturation, data = Blackwood_prelimQ, geom="line", ylab = "Sat", color = factor(Site)) +
  theme(axis.text.x = element_text(angle = 25, vjust = 1.0, hjust = 1.0))

# write.csv(Blackwood_prelimQ, (paste0(outputDir,"/Blackwood_2020prelimQ.csv"))) # complied data file of all RBR sensors along buoy line

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
